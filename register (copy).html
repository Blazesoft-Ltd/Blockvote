     <!DOCTYPE html>
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en"> 
<!--<![endif]-->

<head>
	
    <!-- Include header.php. Contains header content. -->
	    <!-- ==============================================
		Title and Meta Tags
		=============================================== -->
		<meta charset="utf-8">
		<title>Voting - Online Voting Platform</title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="Online Voting Platform">
        <meta name="keywords" content="Online Voting Platform, voting ">
        <meta name="author" content="index.html">		
	    <!-- ==============================================
		CSS
		=============================================== -->
        <!-- Style-->
        <link type="text/css" href="css/style%20(copy).css" rel="stylesheet" />
				
		<!-- ==============================================
		Feauture Detection
		=============================================== -->
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->			

     	<link type="text/css" href="css/login.css" rel="stylesheet" />
     	<link type="text/css" href="css/custom.css" rel="stylesheet" />
    
</head>
<body>
	
     <!-- Include navigation.php. Contains navigation content. -->
 	 
     <!-- ==============================================
     Navigation Section
     =============================================== -->  
     <header class="tr-header">
      <nav class="navbar navbar-default">
       <div class="container">
	    <div class="navbar-header">
		 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		 </button>
		 <a class="navbar-brand" href="index.html">BlockVote</a>
		</div><!-- /.navbar-header -->
		<div class="navbar-left">
		 <div class="collapse navbar-collapse" id="navbar-collapse">
		  <ul class="nav navbar-nav">
		   <li class=""><a href="index.html">Home</a></li>
		   <li class=""><a href="how.html">How it works</a></li>
		  </ul>
		 </div>
		</div><!-- /.navbar-left -->
		<div class="navbar-right">
			<ul id="adminDropdown" class="nav navbar-nav" style="display: none;">
				<li><i class="fa fa-user"></i></li>
				<li class="dropdown user user-menu">
					<!-- Menu Toggle Button -->
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					  <span class="hidden-xs">
					  	Admin
					  </span>
					</a>
					<ul class="dropdown-menu" style="display: none;"></ul>
				</li>
			</ul>
		  	<a href="214407771051.html" class="kafe-btn kafe-btn-mint-small">VOTE</a>	 		
		</div><!-- /.nav-right -->
       </div><!-- /.container -->
      </nav><!-- /.navbar -->
     </header><!-- Page Header -->
 
 	 
     <!-- ==============================================
	 Header
	 =============================================== -->	 
	 <header class="header-login top-page" style="

  background: url('jpg/1517252709.jpg') no-repeat center center fixed;
  background-size: cover;
  background-position: center center;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  color: #fff;
  height: 30vh;
  width: 100%;
  
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;">
      <div class="container">
	   <div class="content">
	    <div class="row">
	     <h1 class="revealOnScroll" data-animation="fadeInDown"> Create Account</h1>
        </div><!-- /.row -->
       </div><!-- /.content -->
	  </div><!-- /.container -->
     </header><!-- /header -->
	 
     <!-- ==============================================
     Banner Login Section
     =============================================== -->
	 <section class="banner-login">
	  <div class="container">
	  		  	
	   <div class="row">
	   
	    <main class="main main-signup col-lg-12">
	     <div class="col-lg-6 col-lg-offset-3 text-center">
				
		  <div class="form-sign">
		   <form id="registration-form" data-toggle="validator">
		    <div class="form-head">
			 <h3>Create New Account</h3>
			</div><!-- /.form-head -->
			<h3 id="feedback"></h3>
            <div class="form-body">            	
            	
             <div class="form-group">
			  <div class="form-controls">
			   <input type="text" id="name" pattern="^[_A-z0-9 ]{1,}$" class="field" placeholder="Account Name" required>
			   <div class="help-block with-errors"></div>
			  </div><!-- /.form-controls -->
             </div><!-- /.form-row -->		

             <div class="form-group">
			  <div class="form-controls">
			   <input type="text" id="quorum" pattern="^[0-9]{1,}$" class="field" placeholder="Minimum Quorum" required>
			   <div class="help-block with-errors"></div>
			  </div><!-- /.form-controls -->
             </div><!-- /.form-row -->	

             <div class="form-group">
			  <div class="form-controls">
			   <input type="text" id="period" pattern="^[0-9]{1,}$" class="field" placeholder="Election Period" required>
			   <div class="help-block with-errors"></div>
			  </div><!-- /.form-controls -->
             </div><!-- /.form-row -->
		   
			 </div><!-- /.form-body -->
	
			 <div class="form-foot">
			  <div class="form-actions">
			   <button type="submit" class="kafe-btn kafe-btn-default full-width">Register</button>
			  </div><!-- /.form-actions -->
			 </div><!-- /.form-foot -->
		   </form>
		   
		  </div><!-- /.form-sign -->
	     </div><!-- /.col-lg-6 -->
        </main>
		
	   </div><!-- /.row -->
	  </div><!-- /.container -->
     </section><!-- /section --> 	

	 
     <!-- Include footer.php. Contains footer content. -->
 	 
	
	 <!-- ==============================================
	 Footer Section
	 =============================================== -->
	 <footer class="footerWhite">

      <!-- COPY RIGHT -->
      <div class="clearfix copyRight">
       <div class="container">
        <div class="row">
         
		 <div class="col-xs-12">
          <div class="copyRightWrapper">
           <div class="row">
		   
            <div class="col-sm-5 col-sm-push-7 col-xs-12">
			 <ul class="list-inline socialLink">
			  <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
			  <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
			  <li><a href="#"><i class="fa fa-pinterest-p" aria-hidden="true"></i></a></li>
			  <li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
			 </ul>
            </div><!-- /col-sm-5 -->
			
		    <div class="col-sm-7 col-sm-pull-5 col-xs-12">
			 <div class="copyRightText">
			  <p>Copyright Â© BlockVote.io&nbsp; 2018. All Rights Reserved</p>
			 </div>
		    </div><!-- /col-sm-7 -->
		  
           </div><!-- /row -->
          </div><!-- /copyRightWrapper -->
         </div><!-- /col-xs-2 -->

        </div><!-- /row -->
       </div><!-- /container -->
      </div><!-- /copyRight -->
	  
    </footer>	
	
     <a id="scrollup">Scroll</a> 

	 
	 <!-- ==============================================
	 Scripts
	 =============================================== -->
    <script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/debunk.js"></script> 
	<script src="https://m.blazebay.com/assets/js/validator.js"></script>
	<script src="js/common.js"></script>
	<script src="js/web3.min.js"></script>
 
	<script type="text/javascript">
		// Checking if Web3 has been injected by the browser (Mist/MetaMask)
		if (typeof web3 !== 'undefined') {
			// Use the browser's ethereum provider
			var web3 = new Web3(web3.currentProvider);
			// MetaMask is installed but not logged in
		}
		else {
		  	console.log('Kindly install MetaMask!');
		}

		var contractABI = [{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"minimum_quorum","type":"uint256"},{"name":"election_period","type":"uint256"}],"name":"add_Institution","outputs":[],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"institute","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":true,"inputs":[],"name":"registered_institutions","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function","stateMutability":"view"}]
		var contractAddress = '0x8a13b4d8c96c8d6efb07512d9f149733e1971d0f';
		var contractInstance = web3.eth.contract(contractABI).at(contractAddress)

		function getInstitution() {
			var index = 0;
			contractInstance.institute(index, (err,result) => {
				console.log(err, result)
			})
		}

		function getNumInstitutions() {
			var index = 0;
			contractInstance.registered_institutions((err,result) => {
				var numInstitutions = result['c'][0]
				console.log(err, result, numInstitutions)
			})
		}

		$('#registration-form').on('submit',function(e){
			e.preventDefault()
			if(!$.fn.isLoggedIn()){
				$('#feedback').html('Kindly log into your metamask to make this transaction');
				return;
			}
			var name = $("#name").val();
			var minimum_quorum = $("#quorum").val();
			var election_period = $("#period").val();

		    contractInstance.add_Institution(name, minimum_quorum, election_period, (err, result) => {
	            var txHashRegex = /^0x([A-Fa-f0-9]{64})$/;
	            if(txHashRegex.test(result)){
	              $('#feedback').html('Transaction is pending...');
	              var status = $.fn.txStatus(result);
	              console.log('status:'+status);
	              if(status){
	                $('#feedback').html('Transaction was successfully <a target="blank" href="https://ropsten.etherscan.io/tx/'+result+'">'+result.substring(0,10)+'...</a>');
	                $("#registration-form").trigger('reset');
	                var contractAddress = $.fn.internalTransactionAddress(result);
	                if(web3.isAddress(contractAddress)){
            			$('#feedback').append('<br>Access your new <a href=admin?account='+contractAddress+'>account</a>');
	                }           
	              }
	              else{
	                $('#feedback').html('Transaction failed <a href="https://ropsten.etherscan.io/tx/'+result+'">'+result+'</a>');
	              }
	            }
	            else{
	              $('#feedback').html('Sorry the transaction failed <a target="blank" href="https://ropsten.etherscan.io/tx/'+result+'">'+result.substring(0,10)+'....</a>');           
	            }
	            console.log(err, result);
		    })

		})
	</script>	 	
	 
</body>

</html> 	